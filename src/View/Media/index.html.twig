{% extends 'layout.html.twig' %}

{% block title %}{{ page_title }}{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="/assets/css/medias.css">
{% endblock %}

{% block javascript %}
    <script defer src="/assets/javascript/filters.js"></script>
{% endblock %}

{% block page_title %}
    <div class="header">
        {% include 'Base/_search.html.twig' %}
        <h1>{{ page_title }}</h1>
    </div>
{% endblock %}

{% block content %}
    <input type="hidden" id="media_type" value="{{ media_type }}">

    <section class="return">
        {% if media_type == 'books' %}
            <a href="/{{ media_type }}/add">Ajouter un livre</a>
        {% elseif media_type == 'musics' %}
            <a href="/{{ media_type }}/add">Ajouter une musique</a>
        {% elseif media_type == 'videos' %}
            <a href="/{{ media_type }}/add">Ajouter une video</a>
        {% endif %}
    </section>

    <div class="filters">
        <select id="categoryFilter" class="selectpicker form-control border-0 mb-1 px-4 py-4 rounded shadow">
            {% for filter in filters %}
                <option value="{{ filter }}" {% if selected_category == filter %}selected{% endif %}>{{ filter }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="cards">
        {% if medias is empty %}
            <p>Aucun média disponible dans cette catégorie.</p>
        {% else %}
            {% for item in medias %}
                <div class="card">
                    {% if item.picture %}
                        <img src="{{ item.picture }}" alt="{{ item.title }}">
                    {% else %}
                        <img src="/assets/images/covers/couverture-{{media_type}}.webp" alt="cover">
                    {% endif %}
                    <h2>{{ item.title }}</h2>

                <div class="categories">
                    {% for type in item.types %}
                        <span class="category">{{ type.name }}</span>
                    {% endfor %}
                    {% for category in item.categories %}
                        <span class="category">{{ category }}</span>
                    {% endfor %}
                </div>

                    <a href="/{{media_type}}/show?id={{ item.id }}" class="btn">Voir Détails</a>
                </div>
            {% endfor %}
        {% endif %}
    </div>
{% endblock %}


